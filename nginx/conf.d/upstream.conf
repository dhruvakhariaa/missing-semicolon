# API Gateway Upstream
upstream api_gateway {
    least_conn;
    server api-gateway:8000 max_fails=3 fail_timeout=30s;
    keepalive 32;
}

# Healthcare Service Upstream
upstream healthcare_service {
    least_conn;
    server healthcare-service:3001 max_fails=3 fail_timeout=30s;
    server healthcare-service-2:3001 max_fails=3 fail_timeout=30s;
    keepalive 32;
}

# Agriculture Service Upstream
upstream agriculture_service {
    least_conn;
    server agriculture-service:3002 max_fails=3 fail_timeout=30s;
    keepalive 32;
}

# Urban Service Upstream
upstream urban_service {
    least_conn;
    server urban-service:3003 max_fails=3 fail_timeout=30s;
    keepalive 32;
}

# Frontend Upstream
upstream frontend {
    server frontend:3000;
    keepalive 32;
}
